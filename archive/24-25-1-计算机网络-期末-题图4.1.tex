\documentclass{standalone}
\usepackage{preset}
\begin{document}
\begin{tikzpicture}[x=20mm,y=20mm]
	\tikzset{pics/host/.style args={#1}{code={
		\begin{scope}
			\draw(-.4,0)rectangle(.4,.5);
			\draw(-.45,-.05)rectangle(.45,.55);
			\draw(-.1,-.05)--++(0,-.1)--++(.2,0)--++(0,.1);
			\draw(0,.65)node{#1};
		\end{scope}
	}}}
	\tikzset{pics/switch/.style args={#1}{code={
		\begin{scope}
			\draw(0,0)--(-.3,.2)--(-.3,.4)--(0,.2)--cycle--(.3,.2)--(.3,.4)--(0,.2)--cycle;
			\draw(.3,.4)--(0,.6)--(-.3,.4);
			\draw(0,-.25)node{#1};
		\end{scope}
	}}}
	\draw(0,2)pic{host={A}};
	\draw(0,0)pic{host={B}};
	\draw(1.5,1)pic{switch={交换机1}};
	\draw(4.5,1)pic{switch={交换机2}};
	\draw(3,2)pic{host={C}};
	\draw(3,0)pic{host={D}};
	\draw(7.5,1)pic{switch={交换机3}};
	\draw(6,2)pic{host={E}};
	\draw(6,0)pic{host={G}};
	\draw(9,0)pic{host={F}};
	\draw(.45,2)--(1.2,1.4)node[above]{1};
	\draw(.45,.5)--(1.2,1.2)node[below]{2};
	\draw(1.8,1.4)node[above]{3}--(4.2,1.4)node[above]{3};
	\draw(4.5,1.6)node[above]{1}--(3.45,2);
	\draw(4.2,1.2)node[below]{4}--(3.45,.5);
	\draw(4.8,1.4)node[above]{2}--(7.2,1.4)node[above]{2};
	\draw(7.5,1.6)node[above]{1}--(6.45,2);
	\draw(7.2,1.2)node[below]{3}--(6.45,.5);
	\draw(7.8,1.4)node[above]{4}--(8.55,.5);
\end{tikzpicture}
\end{document}
